Opal.modules.json=function(Opal){function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}Opal.top;var $nesting=[],nil=Opal.nil,$module=(Opal.breaker,Opal.slice,Opal.module),$klass=Opal.klass,$send=Opal.send,$truthy=Opal.truthy,$hash2=Opal.hash2;return Opal.add_stubs(["$raise","$new","$push","$[]=","$-","$[]","$create_id","$json_create","$const_get","$attr_accessor","$create_id=","$===","$parse","$generate","$from_object","$merge","$to_json","$responds_to?","$to_io","$write","$to_s","$to_a","$strftime"]),function($base,$parent_nesting){var TMP_JSON_$$_1,TMP_JSON_parse_2,TMP_JSON_parse$B_3,TMP_JSON_load_4,TMP_JSON_from_object_5,TMP_JSON_generate_6,TMP_JSON_dump_7,self=$module($base,"JSON"),$nesting=(self.$$proto,[self].concat($parent_nesting)),$writer=nil;!function($base,$super,$parent_nesting){function $JSONError(){}var self=$JSONError=$klass($base,$super,"JSONError",$JSONError);self.$$proto,[self].concat($parent_nesting)}($nesting[0],Opal.const_get_relative($nesting,"StandardError"),$nesting),function($base,$super,$parent_nesting){function $ParserError(){}var self=$ParserError=$klass($base,$super,"ParserError",$ParserError);self.$$proto,[self].concat($parent_nesting)}($nesting[0],Opal.const_get_relative($nesting,"JSONError"),$nesting);var $hasOwn=Opal.hasOwnProperty;function $parse(source){try{return JSON.parse(source)}catch(e){self.$raise(Opal.const_get_qualified(Opal.const_get_relative($nesting,"JSON"),"ParserError"),e.message)}}function to_opal(value,options){var klass,arr,hash,i,ii,k;switch(typeof value){case"string":case"number":return value;case"boolean":return!!value;case"null":return nil;case"object":if(!value)return nil;if(value.$$is_array){for(arr=options.array_class.$new(),i=0,ii=value.length;i<ii;i++)arr.$push(to_opal(value[i],options));return arr}for(k in hash=options.object_class.$new(),value)$hasOwn.call(value,k)&&($writer=[k,to_opal(value[k],options)],$send(hash,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]);return options.parse||(klass=hash["$[]"](Opal.const_get_relative($nesting,"JSON").$create_id()))==nil?hash:Opal.const_get_qualified("::","Object").$const_get(klass).$json_create(hash)}}!function(self,$parent_nesting){self.$$proto,[self].concat($parent_nesting);self.$attr_accessor("create_id")}(Opal.get_singleton_class(self),$nesting),$writer=["json_class"],$send(self,"create_id=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],Opal.defs(self,"$[]",TMP_JSON_$$_1=function(value,options){return null==options&&(options=$hash2([],{})),$truthy(Opal.const_get_relative($nesting,"String")["$==="](value))?this.$parse(value,options):this.$generate(value,options)},TMP_JSON_$$_1.$$arity=-2),Opal.defs(self,"$parse",TMP_JSON_parse_2=function(source,options){return null==options&&(options=$hash2([],{})),this.$from_object($parse(source),options.$merge($hash2(["parse"],{parse:!0})))},TMP_JSON_parse_2.$$arity=-2),Opal.defs(self,"$parse!",TMP_JSON_parse$B_3=function(source,options){return null==options&&(options=$hash2([],{})),this.$parse(source,options)},TMP_JSON_parse$B_3.$$arity=-2),Opal.defs(self,"$load",TMP_JSON_load_4=function(source,options){return null==options&&(options=$hash2([],{})),this.$from_object($parse(source),options)},TMP_JSON_load_4.$$arity=-2),Opal.defs(self,"$from_object",TMP_JSON_from_object_5=function(js_object,options){var $writer=nil;return null==options&&(options=$hash2([],{})),$truthy(options["$[]"]("object_class"))||($writer=["object_class",Opal.const_get_relative($nesting,"Hash")],$send(options,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$truthy(options["$[]"]("array_class"))||($writer=["array_class",Opal.const_get_relative($nesting,"Array")],$send(options,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),to_opal(js_object,options.$$smap)},TMP_JSON_from_object_5.$$arity=-2),Opal.defs(self,"$generate",TMP_JSON_generate_6=function(obj,options){return null==options&&(options=$hash2([],{})),obj.$to_json(options)},TMP_JSON_generate_6.$$arity=-2),Opal.defs(self,"$dump",TMP_JSON_dump_7=function(obj,io,limit){var string;return null==io&&(io=nil),null==limit&&(limit=nil),string=this.$generate(obj),$truthy(io)?($truthy(io["$responds_to?"]("to_io"))&&(io=io.$to_io()),io.$write(string),io):string},TMP_JSON_dump_7.$$arity=-2)}($nesting[0],$nesting),function($base,$super,$parent_nesting){function $Object(){}var TMP_Object_to_json_8,self=$Object=$klass($base,null,"Object",$Object);self.$$proto,[self].concat($parent_nesting);Opal.defn(self,"$to_json",TMP_Object_to_json_8=function(){return this.$to_s().$to_json()},TMP_Object_to_json_8.$$arity=0)}($nesting[0],0,$nesting),function($base,$parent_nesting){var TMP_Enumerable_to_json_9,self=$module($base,"Enumerable");self.$$proto,[self].concat($parent_nesting);Opal.defn(self,"$to_json",TMP_Enumerable_to_json_9=function(){return this.$to_a().$to_json()},TMP_Enumerable_to_json_9.$$arity=0)}($nesting[0],$nesting),function($base,$super,$parent_nesting){function $Array(){}var TMP_Array_to_json_10,self=$Array=$klass($base,null,"Array",$Array);self.$$proto,[self].concat($parent_nesting);Opal.defn(self,"$to_json",TMP_Array_to_json_10=function(){for(var result=[],i=0,length=this.length;i<length;i++)result.push(this[i].$to_json());return"["+result.join(", ")+"]"},TMP_Array_to_json_10.$$arity=0)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){function $Boolean(){}var TMP_Boolean_to_json_11,self=$Boolean=$klass($base,null,"Boolean",$Boolean);self.$$proto,[self].concat($parent_nesting);Opal.defn(self,"$to_json",TMP_Boolean_to_json_11=function(){return 1==this?"true":"false"},TMP_Boolean_to_json_11.$$arity=0)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){function $Hash(){}var TMP_Hash_to_json_12,self=$Hash=$klass($base,null,"Hash",$Hash);self.$$proto,[self].concat($parent_nesting);Opal.defn(self,"$to_json",TMP_Hash_to_json_12=function(){for(var key,value,result=[],i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),result.push(key.$to_s().$to_json()+":"+value.$to_json());return"{"+result.join(", ")+"}"},TMP_Hash_to_json_12.$$arity=0)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){function $NilClass(){}var TMP_NilClass_to_json_13,self=$NilClass=$klass($base,null,"NilClass",$NilClass);self.$$proto,[self].concat($parent_nesting);Opal.defn(self,"$to_json",TMP_NilClass_to_json_13=function(){return"null"},TMP_NilClass_to_json_13.$$arity=0)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){function $Numeric(){}var TMP_Numeric_to_json_14,self=$Numeric=$klass($base,null,"Numeric",$Numeric);self.$$proto,[self].concat($parent_nesting);Opal.defn(self,"$to_json",TMP_Numeric_to_json_14=function(){return this.toString()},TMP_Numeric_to_json_14.$$arity=0)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){function $String(){}var self=$String=$klass($base,null,"String",$String);self.$$proto,[self].concat($parent_nesting);Opal.alias(self,"to_json","inspect")}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){function $Time(){}var TMP_Time_to_json_15,self=$Time=$klass($base,null,"Time",$Time);self.$$proto,[self].concat($parent_nesting);Opal.defn(self,"$to_json",TMP_Time_to_json_15=function(){return this.$strftime("%FT%T%z").$to_json()},TMP_Time_to_json_15.$$arity=0)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){function $Date(){}var TMP_Date_to_json_16,TMP_Date_as_json_17,self=$Date=$klass($base,null,"Date",$Date);self.$$proto,[self].concat($parent_nesting);return Opal.defn(self,"$to_json",TMP_Date_to_json_16=function(){return this.$to_s().$to_json()},TMP_Date_to_json_16.$$arity=0),Opal.defn(self,"$as_json",TMP_Date_as_json_17=function(){return this.$to_s()},TMP_Date_as_json_17.$$arity=0),nil&&"as_json"}($nesting[0],0,$nesting)};
