Opal.modules.e2mmap=function(Opal){function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}Opal.top;var $nesting=[],nil=Opal.nil,$$=(Opal.const_get_qualified,Opal.const_get_relative),$module=(Opal.breaker,Opal.slice,Opal.module),$send=Opal.send,$truthy=Opal.truthy,$hash2=Opal.hash2,$gvars=Opal.gvars;return Opal.add_stubs(["$<","$bind","$module_eval","$Raise","$class","$extend","$def_e2message","$def_exception","$instance_eval","$[]=","$-","$new","$const_defined?","$remove_const","$const_set","$e2mm_message","$nil?","$caller","$=~","$[]","$quote","$shift","$raise","$sprintf","$Fail","$inspect","$each","$ancestors"]),function($base,$parent_nesting){function $Exception2MessageMapper(){}var TMP_Exception2MessageMapper_extend_object_1,TMP_Exception2MessageMapper_bind_2,TMP_Exception2MessageMapper_Raise_6,TMP_Exception2MessageMapper_def_e2message_7,TMP_Exception2MessageMapper_def_exception_8,TMP_Exception2MessageMapper_def_e2message_9,TMP_Exception2MessageMapper_def_exception_11,TMP_Exception2MessageMapper_Raise_14,TMP_Exception2MessageMapper_e2mm_message_15,self=$Exception2MessageMapper=$module($base,"Exception2MessageMapper",$Exception2MessageMapper),$nesting=(self.prototype,[self].concat($parent_nesting));Opal.const_set($nesting[0],"E2MM",$$($nesting,"Exception2MessageMapper")),Opal.defs($$($nesting,"E2MM"),"$extend_object",TMP_Exception2MessageMapper_extend_object_1=function(cl){var $zuper_ii,lhs,rhs,$iter=TMP_Exception2MessageMapper_extend_object_1.$$p,$zuper=nil,$zuper_i=nil;for($iter&&(TMP_Exception2MessageMapper_extend_object_1.$$p=null),$zuper_i=0,$zuper_ii=arguments.length,$zuper=new Array($zuper_ii);$zuper_i<$zuper_ii;$zuper_i++)$zuper[$zuper_i]=arguments[$zuper_i];return $send(this,Opal.find_super_dispatcher(this,"extend_object",TMP_Exception2MessageMapper_extend_object_1,!1,$Exception2MessageMapper),$zuper,$iter),$truthy((lhs=cl,rhs=$$($nesting,"E2MM"),"number"==typeof lhs&&"number"==typeof rhs?lhs<rhs:lhs["$<"](rhs)))?nil:cl.$bind(this)},TMP_Exception2MessageMapper_extend_object_1.$$arity=1),Opal.def(self,"$bind",TMP_Exception2MessageMapper_bind_2=function(cl){var TMP_3;return $send(this,"module_eval",[],((TMP_3=function(){var TMP_Raise_4,TMP_included_5,self=TMP_3.$$s||this;return Opal.def(self,"$Raise",TMP_Raise_4=function($a,$b){var $post_args,err,rest;return($post_args=Opal.slice.call(arguments,0,arguments.length)).length>0&&(err=$post_args[0],$post_args.splice(0,1)),null==err&&(err=nil),rest=$post_args,$send($$($nesting,"Exception2MessageMapper"),"Raise",[this.$class(),err].concat(Opal.to_a(rest)))},TMP_Raise_4.$$arity=-1),Opal.alias(self,"Fail","Raise"),function(self,$parent_nesting){self.prototype,[self].concat($parent_nesting);Opal.udef(self,"$included")}(Opal.get_singleton_class(self),$nesting),Opal.defs(self,"$included",TMP_included_5=function(mod){return mod.$extend($$($nesting,"Exception2MessageMapper"))},TMP_included_5.$$arity=1),nil&&"included"}).$$s=this,TMP_3.$$arity=0,TMP_3))},TMP_Exception2MessageMapper_bind_2.$$arity=1),Opal.def(self,"$Raise",TMP_Exception2MessageMapper_Raise_6=function($a,$b){var $post_args,err,rest,self=this;return($post_args=Opal.slice.call(arguments,0,arguments.length)).length>0&&(err=$post_args[0],$post_args.splice(0,1)),null==err&&(err=nil),rest=$post_args,$send($$($nesting,"E2MM"),"Raise",[self,err].concat(Opal.to_a(rest)))},TMP_Exception2MessageMapper_Raise_6.$$arity=-1),Opal.alias(self,"Fail","Raise"),Opal.alias(self,"fail","Raise"),Opal.def(self,"$def_e2message",TMP_Exception2MessageMapper_def_e2message_7=function(c,m){return $$($nesting,"E2MM").$def_e2message(this,c,m)},TMP_Exception2MessageMapper_def_e2message_7.$$arity=2),Opal.def(self,"$def_exception",TMP_Exception2MessageMapper_def_exception_8=function(n,m,s){return null==s&&(s=$$($nesting,"StandardError")),$$($nesting,"E2MM").$def_exception(this,n,m,s)},TMP_Exception2MessageMapper_def_exception_8.$$arity=-3),self.MessageMap=$hash2([],{}),Opal.defs($$($nesting,"E2MM"),"$def_e2message",TMP_Exception2MessageMapper_def_e2message_9=function(k,c,m){var TMP_10;return $send($$($nesting,"E2MM"),"instance_eval",[],((TMP_10=function(){var $writer,self=TMP_10.$$s||this;return null==self.MessageMap&&(self.MessageMap=nil),$writer=[[k,c],m],$send(self.MessageMap,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,TMP_10.$$arity=0,TMP_10)),c},TMP_Exception2MessageMapper_def_e2message_9.$$arity=3),Opal.defs($$($nesting,"E2MM"),"$def_exception",TMP_Exception2MessageMapper_def_exception_11=function(k,n,m,s){var TMP_12,TMP_13,e;return null==s&&(s=$$($nesting,"StandardError")),e=$$($nesting,"Class").$new(s),$send($$($nesting,"E2MM"),"instance_eval",[],((TMP_12=function(){var $writer,self=TMP_12.$$s||this;return null==self.MessageMap&&(self.MessageMap=nil),$writer=[[k,e],m],$send(self.MessageMap,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,TMP_12.$$arity=0,TMP_12)),$truthy(k["$const_defined?"](n,!1))&&$send(k,"module_eval",[],((TMP_13=function(){return(TMP_13.$$s||this).$remove_const(n)}).$$s=this,TMP_13.$$arity=0,TMP_13)),k.$const_set(n,e)},TMP_Exception2MessageMapper_def_exception_11.$$arity=-4),Opal.defs($$($nesting,"E2MM"),"$Raise",TMP_Exception2MessageMapper_Raise_14=function($a,$b,$c){var $post_args,klass,err,rest,self=this,form=nil,b=nil;return null==$gvars["@"]&&($gvars["@"]=nil),($post_args=Opal.slice.call(arguments,0,arguments.length)).length>0&&(klass=$post_args[0],$post_args.splice(0,1)),null==klass&&(klass=$$($nesting,"E2MM")),$post_args.length>0&&(err=$post_args[0],$post_args.splice(0,1)),null==err&&(err=nil),rest=$post_args,$truthy(form=self.$e2mm_message(klass,err))?(b=$truthy($gvars["@"]["$nil?"]())?self.$caller(1):$gvars["@"],$truthy(b["$[]"](0)["$=~"](new RegExp("^"+$$($nesting,"Regexp").$quote("./e2mmap.rb".$force_encoding("US-ASCII"))+":")))&&b.$shift(),self.$raise(err,$send(self,"sprintf",[form].concat(Opal.to_a(rest))),b)):$$($nesting,"E2MM").$Fail($$($nesting,"E2MM"),$$($nesting,"ErrNotRegisteredException"),err.$inspect())},TMP_Exception2MessageMapper_Raise_14.$$arity=-1),function(self,$parent_nesting){self.prototype,[self].concat($parent_nesting);Opal.alias(self,"Fail","Raise")}(Opal.get_singleton_class($$($nesting,"E2MM")),$nesting),Opal.defs($$($nesting,"E2MM"),"$e2mm_message",TMP_Exception2MessageMapper_e2mm_message_15=function(klass,exp){try{var TMP_16;return $send(klass.$ancestors(),"each",[],((TMP_16=function(c){var mes,self=TMP_16.$$s||this;if(null==self.MessageMap&&(self.MessageMap=nil),null==c&&(c=nil),!$truthy(mes=self.MessageMap["$[]"]([c,exp])))return nil;Opal.ret(mes)}).$$s=this,TMP_16.$$arity=1,TMP_16)),nil}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},TMP_Exception2MessageMapper_e2mm_message_15.$$arity=2),function(self,$parent_nesting){self.prototype,[self].concat($parent_nesting);Opal.alias(self,"message","e2mm_message")}(Opal.get_singleton_class(self),$nesting),$$($nesting,"E2MM").$def_exception($$($nesting,"E2MM"),"ErrNotRegisteredException","not registered exception(%s)")}($nesting[0],$nesting)};
