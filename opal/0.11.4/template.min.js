Opal.modules.template=function(Opal){function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}Opal.top;var $nesting=[],nil=Opal.nil,$klass=(Opal.breaker,Opal.slice,Opal.klass),$hash2=Opal.hash2,$truthy=Opal.truthy,$send=Opal.send;return Opal.add_stubs(["$[]","$[]=","$-","$keys","$attr_reader","$instance_exec","$new","$to_proc","$<<","$join"]),function($base,$super,$parent_nesting){function $Template(){}var TMP_Template_$$_1,TMP_Template_$$$eq_2,TMP_Template_paths_3,TMP_Template_initialize_4,TMP_Template_inspect_5,TMP_Template_render_6,self=$Template=$klass($base,null,"Template",$Template),def=self.$$proto,$nesting=[self].concat($parent_nesting);return def.name=def.body=nil,self._cache=$hash2([],{}),Opal.defs(self,"$[]",TMP_Template_$$_1=function(name){var $a;return null==this._cache&&(this._cache=nil),$truthy($a=this._cache["$[]"](name))?$a:this._cache["$[]"]("templates/"+name)},TMP_Template_$$_1.$$arity=1),Opal.defs(self,"$[]=",TMP_Template_$$$eq_2=function(name,instance){var $writer;return null==this._cache&&(this._cache=nil),$writer=[name,instance],$send(this._cache,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]},TMP_Template_$$$eq_2.$$arity=2),Opal.defs(self,"$paths",TMP_Template_paths_3=function(){return null==this._cache&&(this._cache=nil),this._cache.$keys()},TMP_Template_paths_3.$$arity=0),self.$attr_reader("body"),Opal.defn(self,"$initialize",TMP_Template_initialize_4=function(name){var $a,$writer,$iter=TMP_Template_initialize_4.$$p,body=$iter||nil;return $iter&&(TMP_Template_initialize_4.$$p=null),$a=[name,body],this.name=$a[0],this.body=$a[1],$writer=[name,this],$send(Opal.const_get_relative($nesting,"Template"),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]},TMP_Template_initialize_4.$$arity=1),Opal.defn(self,"$inspect",TMP_Template_inspect_5=function(){return"#<Template: '"+this.name+"'>"},TMP_Template_inspect_5.$$arity=0),Opal.defn(self,"$render",TMP_Template_render_6=function(ctx){return null==ctx&&(ctx=this),$send(ctx,"instance_exec",[Opal.const_get_relative($nesting,"OutputBuffer").$new()],this.body.$to_proc())},TMP_Template_render_6.$$arity=-1),function($base,$super,$parent_nesting){function $OutputBuffer(){}var TMP_OutputBuffer_initialize_7,TMP_OutputBuffer_append_8,TMP_OutputBuffer_join_9,self=$OutputBuffer=$klass($base,null,"OutputBuffer",$OutputBuffer),def=self.$$proto;[self].concat($parent_nesting);return def.buffer=nil,Opal.defn(self,"$initialize",TMP_OutputBuffer_initialize_7=function(){return this.buffer=[]},TMP_OutputBuffer_initialize_7.$$arity=0),Opal.defn(self,"$append",TMP_OutputBuffer_append_8=function(str){return this.buffer["$<<"](str)},TMP_OutputBuffer_append_8.$$arity=1),Opal.alias(self,"append=","append"),Opal.defn(self,"$join",TMP_OutputBuffer_join_9=function(){return this.buffer.$join()},TMP_OutputBuffer_join_9.$$arity=0),nil&&"join"}($nesting[0],0,$nesting)}($nesting[0],0,$nesting)};
